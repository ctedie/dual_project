/////////////////////////////////////////////////////////////////////////////////
/// \addtogroup EXCHANGE
/// \{
///
///
/// \file
/// \brief Fichier en-tete du module EXCHANGE
///
///
///
/////////////////////////////////////////////////////////////////////////////////

// Define to prevent recursive inclusion
#ifndef __EXCHANGE_H_
/// \cond IGNORE_FOLLOWING
#define __EXCHANGE_H_
/// \endcond

#ifdef __cplusplus
extern "C"
{
#endif
/////////////////////////////////////////////////////////////////////////////////
// Includes
/////////////////////////////////////////////////////////////////////////////////
#include <stdint.h>
#include <stdbool.h>
#include <string.h>
#include "macro.h"

/////////////////////////////////////////////////////////////////////////////////
// Exported macro
/////////////////////////////////////////////////////////////////////////////////

#define MAX_DATA_SIZE	256
/////////////////////////////////////////////////////////////////////////////////
// Exported types
/////////////////////////////////////////////////////////////////////////////////

//TODO Pack all struct
/// \brief Exchange header structure
PACK(typedef struct
{
    uint8_t commandID;
    uint16_t datasize;
}) tExchangeHeader;

/// \brief Exchange message structure
PACK(typedef union
{
    tExchangeHeader header;
    PACK(struct
    {
        uint8_t data[MAX_DATA_SIZE];
    }) req;
    PACK(struct
    {
    	uint8_t status;
        uint8_t data[MAX_DATA_SIZE];
    }) ans;
}) tExchangeMsg;



/////////////////////////////////////////////////////////////////////////////////
// Exported constants
/////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////
// Exported functions
/////////////////////////////////////////////////////////////////////////////////

#ifdef __cplusplus
}
#endif

#endif //__EXCHANGE_H_

///
/// \}
///
